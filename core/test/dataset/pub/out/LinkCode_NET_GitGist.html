<head>
    <meta charset="UTF-8">
    <link href="../../../../../www/css/bootstrap-5.1.3-dist/main.css" rel="stylesheet">
    <script src="../../../../../www/css/bootstrap-5.1.3-dist/main.js"></script>
    <link rel="stylesheet" href="../../../../../www/css/main.min.css">
    <link rel="stylesheet" href="../../../../../www/css/plugin.css">
</head>
<!-- Всплывающие окно с исходным кодом из файла ------------------------------------------ -->
<div id="LinkCodeWindow" onclick="OnHide(event)">
    <div id="LinkCodeWindowDet">
        <div id="LinkCodeWindowButtonTitle">
            <div id="LinkCodeName"></div>
            <input type="button" id="LinkCodeWindowButtonHide" value="Скрыть" onclick="LinkCodeWindow.style.display='none'">
        </div>
        <pre class="code" id="LinkCodeWindowBody">
        </pre>
    </div>
    <div id="LinkCodeWindowFooter">
        <div id="LinkCodeWindowPath"></div>
    </div>
</div>
<!-- ---------------------------------------------------------------------------------------- -->
<br><a href="#" class="MarkdownDRY LinkCode" file="https:/gist.githubusercontent.com/denisxab/4290770428d4d34a83624f5343df87fd/raw/3fd17298a2dd382d0a2c52e4e11e2993f9b2da0b/SymmetricCrypto.py" ref="SymmetricCrypto.check_uniq_key" char_start="1074" char_end="1601">check_uniq_key</a>

<br><a href="#" class="MarkdownDRY LinkCode" file="https:/gist.githubusercontent.com/denisxab/4290770428d4d34a83624f5343df87fd/raw/3fd17298a2dd382d0a2c52e4e11e2993f9b2da0b/SymmetricCrypto.py" ref="SymmetricCrypto.crypto" char_start="3224" char_end="3472">crypto</a>


<script>
/* -------------------------- Логика для LinkCode -------------------------- */
// Переменная для хранения исходного кода из файлов. Храниться в кодировки UTF-8, для экранирования спец символов
LinkSourceCode={
    "https:/gist.githubusercontent.com/denisxab/4290770428d4d34a83624f5343df87fd/raw/3fd17298a2dd382d0a2c52e4e11e2993f9b2da0b/SymmetricCrypto.py":decodeURIComponent(escape(atob('aW1wb3J0IHJhbmRvbQppbXBvcnQgc2VjcmV0cwppbXBvcnQgdGltZQpmcm9tIGNvbGxlY3Rpb25zIGltcG9ydCBkZXF1ZQpmcm9tIHBwcmludCBpbXBvcnQgcHByaW50CgoKY2xhc3MgU3ltbWV0cmljQ3J5cHRvOgogICAgQ0hBUl9BUlI6IHR1cGxlID0gKAogICAgICAgICfQsCcsICfQsScsICfQsicsICfQsycsICfQtCcsICfQtScsICfRkScsICfQticsICfQtycsICfQuCcsCiAgICAgICAgJ9C5JywgJ9C6JywgJ9C7JywgJ9C8JywgJ9C9JywgJ9C+JywgJ9C/JywgJ9GAJywgJ9GBJywgJ9GCJywKICAgICAgICAn0YMnLCAn0YQnLCAn0YUnLCAn0YYnLCAn0YcnLCAn0YgnLCAn0YknLCAn0YonLCAn0YsnLCAn0YwnLAogICAgICAgICfRjScsICfRjicsICfRjycsICfQkCcsICfQkScsICfQkicsICfQkycsICfQlCcsICfQlScsICfQgScsCiAgICAgICAgJ9CWJywgJ9CXJywgJ9CYJywgJ9CZJywgJ9CaJywgJ9CbJywgJ9CcJywgJ9CdJywgJ9CeJywgJ9CfJywKICAgICAgICAn0KAnLCAn0KEnLCAn0KInLCAn0KMnLCAn0KQnLCAn0KUnLCAn0KYnLCAn0KcnLCAn0KgnLCAn0KknLAogICAgICAgICfQqicsICfQqycsICfQrCcsICfQrScsICfQricsICfQrycsCgogICAgICAgICcxJywgJzInLCAnMycsICc0JywgJzUnLCAnNicsICc3JywgJzgnLCAnOScsICcwJywKICAgICAgICAnICcsICcmJywgJz8nLCAnQCcsICchJywgJzonLCAnLicsICcsJywgJ1wnJywKICAgICAgICAnXCInLCAnKCcsICcpJywgJy0nLCAnKycsICc9JywgJ18nLCAn4oCTJywgJyMnLCAnOycsCiAgICAgICAgJ1xuJywgJ1x0JywgJ1xcJywgJy8nLCAnfCcsCgogICAgICAgICdhJywgJ2InLCAnYycsICdkJywgJ2UnLCAnZicsICdnJywgJ2gnLCAnaScsICdqJywKICAgICAgICAnaycsICdsJywgJ20nLCAnbicsICdvJywgJ3AnLCAncScsICdyJywgJ3MnLCAndCcsCiAgICAgICAgJ3UnLCAndicsICd3JywgJ3gnLCAneScsICd6JywgJ0EnLCAnQicsICdDJywgJ0QnLAogICAgICAgICdFJywgJ0YnLCAnRycsICdIJywgJ0knLCAnSicsICdLJywgJ0wnLCAnTScsICdOJywKICAgICAgICAnTycsICdQJywgJ1EnLCAnUicsICdTJywgJ1QnLCAnVScsICdWJywgJ1cnLCAnWCcsCiAgICAgICAgJ1knLCAnWicsCiAgICApCgogICAgQHN0YXRpY21ldGhvZAogICAgZGVmIGNoZWNrX3VuaXFfa2V5KGtleTogZGljdFtzdHIsIGxpc3RbaW50XV0pIC0mZ3QgYm9vbDoKICAgICAgICAiIiIKICAgICAgICDQpNGD0L3QutGG0LjRjyDQtNC70Y8g0L/RgNC+0LLQtdGA0LrQuCDRg9C90LjQutCw0LvRjNC90L7RgdGC0Lgg0LLRgdC10YUg0LfQvdCw0YfQtdC90LjQuSDQsiBga2V5YAoKICAgICAgICA6cGFyYW0ga2V5OiDQktC30Y/RgtGMINC90LDQv9GA0LjQvNC10YAg0LjQtyDQvNC10YLQvtC00LAgYGdlbmVyYXRlX3JhbmRvbV9hcnIoKWAKICAgICAgICAiIiIKICAgICAgICB1c2VkX2NoYXI6IHNldFtpbnRdID0gc2V0KCkKICAgICAgICBmb3IgX2ssIF92IGluIGtleS5pdGVtcygpOgogICAgICAgICAgICBmb3IgX3kgaW4gX3Y6CiAgICAgICAgICAgICAgICBpZiBub3QgX3kgaW4gdXNlZF9jaGFyOgogICAgICAgICAgICAgICAgICAgIHVzZWRfY2hhci5hZGQoX3kpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoZiLQodC40LzQstC+0LsgYHtfa31gINGB0L7QtNC10YDQttC40YIg0L3QtSDRg9C90LjQutCw0LvRjNC90L7QtSDQt9C90LDRh9C10L3QuNC1IGB7X3l9YCIpCiAgICAgICAgcmV0dXJuIFRydWUKCiAgICBAY2xhc3NtZXRob2QKICAgIGRlZiBnZW5lcmF0ZV9yYW5kb21fYXJyKGNscywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlbl9hcnI6IGludCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbl9yYW5kb21faW50OiBpbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhfcmFuZG9tX2ludDogaW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VlZF86IGludCA9IE5vbmUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIC0mZ3QgZGljdFtzdHIsIGxpc3RbaW50XV06CiAgICAgICAgIiIiCiAgICAgICAg0JPQtdC90LXRgNC40YDRg9C10Lwg0YHQu9GD0YfQsNC50L3RiyDQt9C90LDRh9C10L3QuNC5INC00LvRjyDQutC70Y7Rh9C10Lkg0YHQu9C+0LLQsNGA0YwKCiAgICAgICAgOnBhcmFtIGxlbl9hcnI6INCU0LvQuNC90L3QsCDRgdC70YPRh9Cw0LnQvdGL0YUg0YfQuNGB0LXQuwogICAgICAgIDpwYXJhbSBtaW5fcmFuZG9tX2ludDog0JzQuNC90LjQvNCw0LvRjNC90L7QtSDRh9C40YHQu9C+INC00LvRjyAgYHJhbmRvbS5yYW5kaW50YAogICAgICAgIDpwYXJhbSBtYXhfcmFuZG9tX2ludDog0JzQsNC60YHQuNC80LDQu9GM0L3QvtC1INGH0LjRgdC70L4g0LTQu9GPICBgcmFuZG9tLnJhbmRpbnRgCiAgICAgICAgOnBhcmFtIHNlZWRfOiDQl9C10YDQvdC+INC00LvRjyDQs9C10L3QtdGA0LDRgtC+0YDQsCBgcmFuZG9tLnNlZWQoc2VlZF8pYAogICAgICAgICIiIgoKICAgICAgICBkZWYgZ2V0X3JhbmRvbV9hcnIoKSAtJmd0IGxpc3RbaW50XToKICAgICAgICAgICAgIyBhID0gWzEsMiwzLDRdCiAgICAgICAgICAgIHRtcF9hcnIgPSBbXQogICAgICAgICAgICB3aGlsZSBsZW4odG1wX2FycikgIT0gbGVuX2FycjoKICAgICAgICAgICAgICAgIHRtcCA9IHJhbmRvbS5yYW5kaW50KG1pbl9yYW5kb21faW50LCBtYXhfcmFuZG9tX2ludCkKICAgICAgICAgICAgICAgIGlmIG5vdCB0bXAgaW4gdXNlZF9jaGFyOgogICAgICAgICAgICAgICAgICAgIHVzZWRfY2hhci5hZGQodG1wKQogICAgICAgICAgICAgICAgICAgIHRtcF9hcnIuYXBwZW5kKHRtcCkKICAgICAgICAgICAgcmV0dXJuIHRtcF9hcnIKCiAgICAgICAgc2VlZF8gPSBzZWVkXyBpZiBzZWVkXyBlbHNlIGludCh0aW1lLnRpbWUoKSkKICAgICAgICByYW5kb20uc2VlZChzZWVkXykKICAgICAgICB1c2VkX2NoYXIgPSBzZXQoKQogICAgICAgIGNoYXJfZGljdDogZGljdFtzdHIsIGxpc3RbaW50XV0gPSB7fQogICAgICAgIGZvciBfeCBpbiBjbHMuQ0hBUl9BUlI6CiAgICAgICAgICAgIGNoYXJfZGljdFtfeF0gPSBnZXRfcmFuZG9tX2FycigpCiAgICAgICAgcmV0dXJuIGNoYXJfZGljdAoKICAgIEBzdGF0aWNtZXRob2QKICAgIGRlZiBSZXZlcnNlVHJhbnNlY3RzTWFwKHRyYW5zbGF0ZV9tYXA6IGRpY3Rbc3RyLCBsaXN0W2ludF1dKSAtJmd0IGRpY3Rbc3RyLCBzdHJdOgogICAgICAgIHJlczogZGljdFtzdHIsIHN0cl0gPSB7fQogICAgICAgIGZvciBfaywgX2FycmF5X3ZhbHVlIGluIHRyYW5zbGF0ZV9tYXAuaXRlbXMoKToKICAgICAgICAgICAgZm9yIF92IGluIF9hcnJheV92YWx1ZToKICAgICAgICAgICAgICAgIHJlc1tzdHIoX3YpXSA9IF9rCgogICAgICAgICMgcHJpbnQoIjEiLCBzdHIodHJhbnNsYXRlX21hcClbOjIwMF0pCiAgICAgICAgIyBwcmludCgiMiIsIHN0cihyZXMpWzoyMDBdKQogICAgICAgIHJldHVybiByZXMKCiAgICBAc3RhdGljbWV0aG9kCiAgICBkZWYgY3J5cHRvKHRleHQ6IHN0ciwgdHJhbnNsYXRlX21hcDogZGljdFtzdHIsIGxpc3RbaW50XV0pIC0mZ3Qgc3RyOgogICAgICAgIHJlczogZGVxdWVbc3RyXSA9IGRlcXVlKCkKICAgICAgICBmb3IgX2NoYXIgaW4gdGV4dDoKICAgICAgICAgICAgdG1wID0gc2VjcmV0cy5jaG9pY2UodHJhbnNsYXRlX21hcFtfY2hhcl0pCiAgICAgICAgICAgIHJlcy5hcHBlbmQoc3RyKHRtcCkpCiAgICAgICAgcmV0dXJuICJ8Ii5qb2luKHJlcykKCiAgICBAc3RhdGljbWV0aG9kCiAgICBkZWYgZGVjcnlwdG8odGV4dDogc3RyLCByZXZlcnNlX3RyYW5zbGF0ZV9tYXA6IGRpY3Rbc3RyLCBzdHJdKSAtJmd0IHN0cjoKICAgICAgICByZXMgPSBbXQogICAgICAgIGZvciBfY2hhciBpbiB0ZXh0LnNwbGl0KCJ8Iik6CiAgICAgICAgICAgIHRtcCA9IHJldmVyc2VfdHJhbnNsYXRlX21hcC5nZXQoX2NoYXIsIEZhbHNlKQogICAgICAgICAgICBpZiB0bXA6CiAgICAgICAgICAgICAgICByZXMuYXBwZW5kKHRtcCkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoItCd0LXQstC10YDQvdGL0LUg0LTQsNC90L3Ri9C1IikKICAgICAgICByZXR1cm4gIiIuam9pbihyZXMpCgoKaWYgX19uYW1lX18gPT0gJ19fbWFpbl9fJzoKICAgIHJlcyA9IFN5bW1ldHJpY0NyeXB0by5nZW5lcmF0ZV9yYW5kb21fYXJyKGxlbl9hcnI9NCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlZWRfPTQ0NDQyMzQyNDM0NDQ0NDQ0NCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbl9yYW5kb21faW50PS02MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhfcmFuZG9tX2ludD04ODgpCiAgICBwcHJpbnQocmVzKQogICAgcHByaW50KFN5bW1ldHJpY0NyeXB0by5jaGVja191bmlxX2tleShyZXMpKQoKICAgIHRleHQgPSBTeW1tZXRyaWNDcnlwdG8uY3J5cHRvKCLQn9GA0LjQstC10YIiLCByZXMpCiAgICBwcmludCh0ZXh0KQoKICAgIHJldmVyc2VfdHJhbnNsYXRlX21hcCA9IFN5bW1ldHJpY0NyeXB0by5SZXZlcnNlVHJhbnNlY3RzTWFwKHJlcykKICAgIHByaW50KFN5bW1ldHJpY0NyeXB0by5kZWNyeXB0byh0ZXh0LCByZXZlcnNlX3RyYW5zbGF0ZV9tYXApKQ==')))
};
function AddEventLinkCode() {
    /* Добавление обработка нажатий на ссылки */
    
    let elm = document.querySelectorAll(".MarkdownDRY.LinkCode");
    elm.forEach((e) => {
        e.addEventListener("click", () => {
            DisplayLinkCode(e);
        });
    });
}
AddEventLinkCode();
function DisplayLinkCode(_elem) {
    /* Показать всплывающие окно с исходным кодом */
    
    // Устанавливаем в заголовок всплывающего окна, название ссылки которая вызвала это окно
    LinkCodeName.textContent=_elem.textContent
    
    // Установить путь к файлу или ссылку в выплывающие окно
    LinkCodeWindowPath.textContent=_elem.getAttribute('file')

    // Получаем элемент в котором будет исходный текст из файла
    let _el = document.querySelector('#LinkCodeWindowBody')
    const source_text = LinkSourceCode[_elem.getAttribute('file')]
    if (source_text) {
        // --- Вставка кода в всплывающие окно --- //
        _el.innerHTML = toTag(source_text, 'code', 0, 0, 0, true);
        // --- Выделение кода --- //
        const char_start = _elem.getAttribute('char_start');
        const char_end = _elem.getAttribute('char_end');
        if (char_start > 0 && char_end > 0) {
            // Выделяем текст согласно диапазону из ссылки. Если конечно такой диапазон есть.
            // Его может не быть если ссылка указывает на несуществующий элемент кода.              
            const highlight_text = toTag(toTag(_el.textContent.slice(char_start, char_end), 'span', 0, 0, 0, true), 'code', true);
            // Собираем результат, и записываем его в тело всплывающего окна
            _el.innerHTML = `${toTag(_el.textContent.slice(0, char_start), 'code', null, null, true, true)}` +
                `${highlight_text}` +
                `${toTag(_el.textContent.slice(char_end, _el.innerHTML.length), 'code', null, true, null, true)}`
        }
        // ------------------------------------------------------------- //        
    }
    // Делаем видимым окно
    LinkCodeWindow.style.display = 'block';
    // Перебираем все строки и ищем начало выделение кода
    for (let _e of _el.childNodes) {
        if (_e.childNodes.length > 0 && _e.childNodes[0].tagName === "SPAN") {
            // Плавная прокрутка к первому выделенному блоку
            _e.scrollIntoView({ behavior: 'smooth'});
            break;
        }
    }
}
function toTag(text, tag, is_skip_first_last, skip_first, skip_last, escaping) {
    /*Поместить текст в теги

    is_skip_first_last=true - Если нужно пропустить первый и последний тег.
    escaping=true -  Экранирование треугольных скобок, если этого не сделать то метод `innerHTML` скроет текст в скобках.
    */

    let list = [];
    if (escaping) {
        text = text.replace(/</g,'&lt').replace(/>/g,'&gt');
    }
    const tmp = text.split('\n');

    if (!is_skip_first_last) {
        if (skip_last) {
            tmp.slice(0, -1).forEach(
                (_e) => {
                    list.push(`<${tag}>${_e}</${tag}>`);
                }
            )
            list.push(`<${tag}>${tmp[tmp.length - 1]}`)
        } else if (skip_first) {
            list.push(`</${tag}>${tmp[0]}`)
            tmp.slice(1, -1).forEach(
                (_e) => {
                    list.push(`<${tag}>${_e}</${tag}>`);
                }
            )
        } else {
            tmp.forEach(
                (_e) => {
                    list.push(`<${tag}>${_e}</${tag}>`);
                }
            )
        }
    } else {
        // Если нужно пропустить первый и последний тег
        list.push(tmp[0])
        tmp.slice(1).forEach(
            (_e) => {
                list.push(`<${tag}>${_e}</${tag}>`);
            }
        )
        // list.push(tmp[tmp.length - 1])
    }
    return list.join('\n');
}
function OnHide(_event) {
    /* Скрыть выплывающие окно при нажатии вне его */
    
    console.log('OnHide');
    if (_event.target.id === 'LinkCodeWindow') {
        LinkCodeWindow.style.display = 'none'
    }
}

/* --------------------------------------------------------------------------------------------- */
</script>
        