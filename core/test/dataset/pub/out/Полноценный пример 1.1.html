
<head>
    <meta charset="UTF-8">
    <link href="../../../../../www/css/bootstrap-5.1.3-dist/main.css" rel="stylesheet">
    <script src="../../../../../www/css/bootstrap-5.1.3-dist/main.js"></script>
    <link rel="stylesheet" href="../../../../../www/css/main.min.css">
    <link rel="stylesheet" href="../../../../../www/css/plugin.css">
</head>
# Причина появления

<div hidden="">![Привью](./doc/Превью.png)</div>'

`Markdown` хорош, опрятен, и не многословен, он как сын маминой подруги, среди
всех остальных языков разметки. В нашем кругу `Markdown` заслужил уважение тем
что он использует спец символы для разметки, а не этот ваш заморский говор. Так
как `Markdown` хорош, и существует достойные редакторы для него, мы решили не
создавать очередной велосипед, а создать из существующего - электро байк по
имени `MarkdownDRY`.

![Логотип `MarkdownDRY`](./doc/MarkdownDRY.svg)


---
Немного искренности от автора: Это документация написана в юмористическом стили,
чисто, для того чтобы поднять настроения свои товарищам по клавиатуре.
Кого-нибудь конечно будет серьезная документация, и стабильные ветки, и об этом
событии, первыми, вы сможете узнать в группе `MDDRY`, там же вы можете накидать
багов связанные с `MDDRY`, вмести свои предложения для новых `ФИЧ`. Если вы
хотите выразить свое неудержимое негативное мнение, то можете это сделать
группу `НЕ_ЛЮБЛЮ_MDDRY`.

---

Про лицензию: `MarkdownDRY` не имеет ни какой лицензии, и не имеет авторского
права, юзайти его в своё удовольствие, и если хотите, делитесь впечатлениями ;)

![](./doc/License.png)

# Какие фичи предлагает MarkdownDRY ?

Начнем с того что `MarkdownDRY` как раз имеет такое название, из-за того что
следует принципу разработки
`Don’t repeat yourself (DRY; с англ «не повторяйся»)` и все его фичи направлены
во имя этого принципа.

Также, следовательно, из названия `MarkdownDRY` совместим с `Markdown` и эта
связь не только синтаксическая, но и ментальная. Он такой же простой, и с ним
справиться любая домохозяйка.

Вот изображение которые объясняет обратную совместимость.

![](./doc/ОбратнаяСовместимость.png)

## Список фич

### Переменные - `Vars`

Вот что думаю - авторы не любят повториться, а читатели любят когда им,
повторяют, и это безответная любовь сводиться к тому что документация похожа на
крысиную нору. Куски информации раскиданы по всему тексту, читатель забывает
важный аспект, совершает ошибку, ищет её решение по всему тексту, напрягает
извилины, ну а автор не хочет дублировать текст везде, где это нужно, и максимум
дает ссылку на главу в котором где-то написан этот важный аспект.

Все могло бы быть взаимно, если бы автор напомнил читателю важные аспекты,
везде, где это нужно, но не при это без ручного дублирование текста.

Надеюсь я доказал зачем нужны переменные в языке разметки ?

![](./doc/мемVars.png)

#### Синтаксис

Переменные в `MarkdownDRY` похожи на переменные в ЯП, у них есть

- Инициализации. (Похоже на список ссылок которые указывают на какие-то данные)

  513397e3b96189c0b76e01a8bae12d4f

- Обращение. (Это просто красивый и не занятый шаблон)

  403a15c61a4ee5ea4462c46f1e506ec3

- Область видимости. Инициализациия переменных и обращения к ним, должно быть в
  одном файле и в каком-нибудь заголовке(
  если вам нужна переменная из другого файла, то подумайте, а может вам лучше
  объединить эти файлы, или же использовать `Ссылочные блоки`). Поиск переменных
  производиться при формировании кеша заголовков который создается при сборке
  файла.

  Алгоритм поиска - Начинаем искать все заголовки в файле, встречается нам
  заголовок, из него мы берем название, уровень, и весь текст от начало этого
  заголовка и до следующего. Весь текст заголовка парсим и ищем инициализацию
  переменных, если находим их то заносим в кеш текущего заголовка, после этого
  ищем обращения к переменным, если они есть то начинаем поиск сначала в текущем
  заголовке, потом в ранее инициализированных заголовков, но не во всех, а
  только в тех что, выше текущего.

  **В общем не парьтесь, глянете на примеры, попробуйте втянутся, и сразу
  поймете что к чему тут.**

- Переопределение. Тут все по классике, возьмется инициализированная переменная,
  которая ближе всего к месту обращения.

#### Пример

Нам нужно написать документацию для реляционной таблицы. Мы можем облегчить себе
работу, но не жизнь, используя переменные.

7d0589fe39bb1c3940ae8debb16a27d0

---

Итог:

> Обратим внимание, что обращение к не инициализированной переменной `[=IS_LONELY_DOG]` останется без изменений.

![](./doc/Vars.png)

### Ссылочный блок - `ReferenceBlock`

Ссылочные блоки — они нужны, чтобы делать ссылки на блоки текста. Вы можете где
угодно инициализировать ссылочный блок, и где угодно получить его данные. Имена
ссылочных блоков должны быть уникальны, они похоже на теги в `Markdown` ,
например если вы будете использоваться редактор `Obsidian` то в нём есть
автокомплит и поиск по тегам, эту возможность можно также использовать для
ссылочных блоков.

![](./doc/мемReferenceBlock.png)

#### Синтаксис

Инициализация:

7ca5c3ab5309d560032bbf39f7972328

---

Обращение:

2137a91121f78ffd781e6b17edb84f1a

#### Пример

Так как `MarkdownDRY` должен быть настолько простым, чтобы с ним смогла
справиться любая домохозяйка, сделаем пример для домохозяйки.

Наша гипотетическая домохозяйка, решили переписать сою кулинарную книгу рецепты
в электронный вид, чтобы поделиться своими знаниями на форуме с другими
домохозяйками. Она решила выбрать язык разметки `MarkdownDRY`, и это был её
осознанный выбор. Она знала что в нем есть ссылочные блоки, и это было ключевым
моментом в её решение.

Она использовала их, для того чтобы напоминать другим домохозяйкам, которые
возможно еще не совсем опытны, на важные аспекты в кулинарии.

Вот пример как она их использовала.

ddc008817e3acbf7a0cb7f5c97a7f19d

---
d892c2484ac8f47036672014a49b6ccf

### Раскрываемые блок - `DropdownBlock`

Ладно, из-за моих плоских шутейк большая часть аудитории уже ушла, а это значит
что ты, мой читатель, который дошел до этой строки, особенный! Не такой, как
все. Поэтому сделаю тебе подарок - буду писать только суть, без демагогии.

Цель `раскрываемого блока`, скрыть излишнюю подробность при просмотре документа.

Принцип работы `DropdownBlock`

![](doc/мемDropdownBlock.png)

#### Синтаксис

- Шаблон

3ad3560ba43eae98bdcb02b276ced63c

#### Пример

9863f6580a68d81163d4febabd63c415

---
![](./doc/DropdownBlock.png)

### Выделение блоков - `HighlightBlock`

#### Синтаксис

- `!` Пример
- `!!` Информирование
- `!!!` Предупреждение

#### Пример

d25df3dcd956c88a7d60b29a9a025be9

---
![](./doc/HighlightBlock.png)

### Фото Галерея - `PhotoGallery`

Группировать фотки это круто. Килир-фича когда вам нужно показать
последовательность действий использования UI, через фото.

#### Синтаксис

Вот так все просто. Делаем список, даем ему имя, и в нем делаем под список со
ссылками на фото.

e78080215abcc1d29a50840fb95a2977

#### Пример

Перед нами стоит ответственная задача, нужно собрать галерею из негодных и
годных мемов.

Решить эту задачу мы можем так

757bf38c3d6bcf641b7def7bddf24271
---

![](./doc/PhotoGallery.png)

### Математический размах - `MathSpan`

А это уже не шутки ... серьезно ! У пользователей `MarkdownDRY` всегда будет под
рукой `SymPy`.

А это значит, что юзеры могут прямо в документации - рассчитывать траекторию
движения космического аппарата по просторам вселено, с учетом гравитационных
маневров около массивных тел. Или же, считать потраченные минуту на задачи
заказчиков.

![](./doc/мемMathSpan.png)

#### Синтаксис

e4cff9a1f453bf6f25629f0ab8b73735

#### Пример

50637a0f96e974565f3721fbd1019dc2

![](./doc/MathSpan_Simpl.png)

---

(Комбинируем с `Vars`):

dd57cdd11f36f91acf4b2debf6011fa2

![](./doc/MathSpan.png)

---

### Скрытые заголовки - `HiddenHeaders`

Бывает нужно, создать заголовок, для того чтобы сослаться на него, и мы не хотим
чтобы он попадал в оглавление документа. Для этого есть `HiddenHeaders`

#### Синтаксис

079defb3690fb538a8c21db36f6bfda1

#### Пример

Вот типичная документация проекта, из неё нам нужно скрыть заголовки которые
подробно описывать ошибки. В оглавление они будут занимать много лишнего места,
а вот ссылаться на эти заголовки в других местах документации будет полезно.
Поэтому воспользуемся `HiddenHeaders`


74e4db7748a7e2170c373e5fe4a6d214

---

В итоге:
![](./doc/HiddenHeaders.png)

### Ссылки на структурные элементы кода - LinkCode

Полноценна эта фича, пока доступна только для `Python`, но вы можете
использовать универсальный вариант такой как `УникальныйЯкорь` для любого
формата данных.

Суть заключается в том, что вы можете делать ссылки на элементы кода такие как:

- `Класс`
- `Класс.Метод`
- `Класс.Атрибут`
- `Функция`
- `Переменная`
- `УникальныйЯкорь` отдельная глава *

#### Синтаксис

39c9b5789c89acdf2a1fd42447596e95

#### УникальныйЯкорь

Суть в том что мы заключаем нужны текст в "блок", а потом ссылаемся на него. Эта
фича доступна во всех форматах.

Ссылка на Уникальный Якорь

165c9a83f8b2c71485cff47dd9e6b332

Создание якоря

83ceb1e2566953fef6e14b439d2851b3

#### Пример ссылки на локальные файлы

Есть файл `main.py`, вот его исходник

```
# Обычная функция
from functools import wraps


class NeClass:
    name: str = __file__

    def __call__(self, *args, **kwargs):
        """Доки"""
        return self.name


def another_function(func):
    """
    Функция которая принимает другую функцию
    """

    @wraps(func)
    def wrapper():
        """
        Оберточная функция
        """
        # Химичим>
        val = "The result of %s iSs %ss" % (func(), eval(func()))
        # <Химичим
        return val

    return wrapper


@another_function
def a_function():
    """Обычная `функция`"""
    return "1+1"


@another_function
def a_function():
    """Обычная `функция`"""
    return "1+2"


@another_function
def a_function():
    """Обычная `функция`"""
    return "1+3"


@another_function
def a_function():
    """Обычная `функция`"""
    return "1+4"


@another_function
def a_function():
    """Обычная `функция`"""
    return "1+5"


__name__ = '__main__'

if __name__ == "__main__":
    print(a_function.__name__)  # a_function
    print(a_function.__doc__)  # Обычная функция

```

---

Будем делать ссылки на все возможные варианты элементов кода:

d9b3006d9c32bdf66ee4dc83fb61da1a

---
В итоге:

![](./doc/LinkCode.png)

#### Пример ссылки на файл из интернета

У нас есть файл на `GitGist` или на `GitHub`, или откуда угодно. И нам нужно
сделать ссылку на него. Это делается точно так же как и на локальный файл. В
этом случае исходный код будет загружен при сборке `MarkdownDRY`. Если вам нужно
обновить исходный код на актуальный вариант из интернета, то пересоберите
проект. Ссылки похожие, теперь место пути указываем `URL`.

---

Вот реальный пример, ссылаться мой код из `GitGist`:

4792545a452b9ef06d6733814d5069f4

---
В итоге:

![](./doc/LinkCode_NET_GitGist.png)

### Экранированная вставить кода из файла - InsertCodeFromFile

Суть в том что мы можем вставлять текст из другого файла, в
результирующий `HTML` файл. В отличие от `IndisputableInsertCodeFromFile` в `md`
файл он вставиться.

#### Синтаксис

Вставить исходный код из файла в `MarkdownDRY`:

5d5a8bdba927fd23ebe14ec35212a6ac

#### Пример

Вот файл, который будем вставлять, назовем его `./raw/regex_mem.txt`

```text
(?P<class>(class[\t ]+.+[\t ]*)(?:\((.+)\))?:\n(?:\t+| {1,4}.*\n+)+)|
(?P<func>(def[\t ]+.+[\t ]*)\((.+):\n(?:(?:\t+| {1,4}).*\n+)+)|
(?:\A|\n)\s*(?P<var>.+[\t ]*=.+)
```

---

Пример использование

d9fc1ab44321bdcef533ce5cd37e98ae

---

В итоге:

![](./doc/InsertCodeFromFile.png)

### Бесспорная вставить кода из файла - IndisputableInsertCodeFromFile

`Бесспорная вставка` подразумевает что текст из файла вставиться без всякого
форматирования в файл `md` который после будет обработан `MarkdownDRY`. Вообще
это самый первый этап конвертации, в нем мы можем просто соединять
разные `markdown` файлы в один, вставлять текст для примеров из других файлов, и
делать что нраву. Но помните что - "с большой силой, приходит большая
ответственность"

Эта фича уже используется в этой документации, для вставки примеров. Я думаю это
очень хорошо когда примеры из документации являются также и данными для
тестирования, если мы что-то поменяли в логике программы, то мы поправим и текст
тестов. А так как примеры берутся из тестовых данных, то они будут всегда
актуальны.

#### Синтаксис

![](./doc/IndisputableInsertCodeFromFile.png)

> `Расширение` - лучше не указывать бинарные файлы для вставки. Но если душа просит, то ограничений на это нет.

#### Пример

Мы разработали скрипт для парсинга `env` файлов, вещь полезная, и важная,
поэтому давайте напишем к ней документацию. Самая лучшая документация, это там
где меньше написано и больше показано, так что давайте сразу приведем пример,
как скрипт работает.

b487cadc97b920f7f71c537b5909356b

---
В итоге:

c9594abd32ebc1152c7ebe8d23ba66ae

---------------

### Многостраничные кодблоки - MultiPageCode

#### Синтаксис

7f67605d909539c0cc7d33cfe0d5e545

- `[КраткоеИмяДляБлока]`- Название блока с кодом

- `{ВыделитьСтроки}` - Выделение строк, можно указывать конкретные строки через
  запятую(`{Число_1,Число_2}`)  или указывать диапазонны через
  тире `{Число_1-Число_2}`. Эти два варианта можно
  комбинировать.`{Число_1-Число_2,Число_3-Число_4,Число_5,Число_6`

#### Пример

ed27d72279112e913973b5227dd5be77

---
В итоге:

![](./doc/MultiPageCode.png)

### Многострочные таблицы - `MultiLineTables`

В Многострочные таблицы можно писать

- Переносы строк
- Фото
- Блоки с кодом
- Ссылочные блоки

Что еще дозволено:

- Доступны агрегатные функции `avg(),sum()`для диапазона ячейка.
- Разрешено обращаться к данным указанных ячеек и производить с ними
  арифметику (с использованием `SymPy`). Я не понимаю в чем прикол использовать
  английский алфавит для столбцов, поэтому у нас будут все равны - числовые
  столбцы - числовые строки, и начало у них с единицы.

#### Синтаксис

Для того чтобы таблица стала многострочной нужно указать в следующем столбце 3
тире подряд `-`. И так нужно делать для каждого столбца.

Обращение к ячейкам:

edda26dbaf9482f607cee5bfea2c9b85

Вызов агрегатной функции: поговорка, чтобы запомнить порядок аргументов (Слева
на право, Сверху вниз)

d5b4289187ea528ff4d2618c815a1873

#### Пример

a086f6df166329b43e5670c1e7c37abd

---
В итоге:

![](./doc/MultiLineTables.png)

### Пока не реализовано

#### Выделения изображения

Нарисовать квадрат(`[#]`)  на изображение
0f89103f4131457d98ce0d4319538f62

- 1 = ВерхняяЛеваТочка
- 2 = ВерхняяПраваяТочка
- 3 = НижняяЛеваТочка
- 4 = НижняяПраваяТочка

Нарисовать много квадратов(`[#]`)  на изображении - нужно перечислить через
запятую
b0ac8e8bd398bb0913e5dd0bf495496d

---

Нарисовать стрелку(`[^]`) на изображение
bf6a54a9f4a803939265c953047df985

- 1 = ВерхняяЛеваТочка
- 2 = ВерхняяПраваяТочка
- 3 = НижняяЛеваТочка
- 4 = НижняяПраваяТочка

Нарисовать много стрелок(`[^]`)  на изображении - нужно перечислить через
запятую
698fa33dd51cf8944417058fc2fccf23
---

Комбинируем, квадраты и стрелку.
0ee4705412d7f5bacbffeb03691ba1ab

#### Последовательность действий

Синтаксис:
6d773347469ec8eb79cccc9c7b8aebbc

Если вам нужно вставить фото для наглядного описания действий то:

eb1696c0fbe1a5ed87c85e65cae34d0b

---
055d2b455c03f29580c31e9ce39de3bc
---

#### Описание UI виджетов

Для нестандартных оформлений нужно использовать html теги, по
типу `dry_ИмяПлагины`. В данном случае `dry_ui`.

Синтаксис

6dc0c18c0ed2cf0bdf514c47f34915df

